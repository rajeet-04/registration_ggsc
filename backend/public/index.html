<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration & QRMaze Admin Panel</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .card h2 {
            color: #667eea;
            margin-bottom: 16px;
            font-size: 1.3rem;
            border-bottom: 2px solid #667eea;
            padding-bottom: 8px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        label {
            display: block;
            margin-bottom: 6px;
            color: #333;
            font-weight: 500;
        }

        input,
        select,
        textarea {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .response {
            margin-top: 16px;
            padding: 12px;
            border-radius: 6px;
            font-size: 13px;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }

        .response.success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            display: block;
        }

        .response.error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            display: block;
        }

        .response pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }

        .small-text {
            font-size: 12px;
            color: #666;
            margin-top: 4px;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            margin-right: 8px;
        }

        .badge.get {
            background: #61affe;
            color: white;
        }

        .badge.post {
            background: #49cc90;
            color: white;
        }

        .badge.delete {
            background: #f93e3e;
            color: white;
        }

        .badge.put {
            background: #fca130;
            color: white;
        }

        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 8px;
            vertical-align: middle;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Login Screen Styles */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .login-card {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 400px;
        }

        .login-card h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2rem;
            text-shadow: none;
        }

        .hidden {
            display: none !important;
        }

        .nav-bar {
            background: white;
            padding: 16px 24px;
            border-radius: 12px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .nav-bar h2 {
            color: #667eea;
            margin: 0;
            font-size: 1.5rem;
        }

        .nav-buttons {
            display: flex;
            gap: 12px;
        }

        .nav-button {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .nav-button:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .logout-button {
            background: linear-gradient(135deg, #f93e3e 0%, #c42c2c 100%);
            color: white;
            border: none;
        }

        .logout-button:hover {
            background: linear-gradient(135deg, #c42c2c 0%, #a02020 100%);
        }
    </style>
</head>

<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="login-card">
            <h1>üîê Admin Login</h1>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" placeholder="Enter username" required autocomplete="username">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter password" required
                        autocomplete="current-password">
                </div>
                <button type="submit">Login</button>
                <div class="response" id="loginResponse"></div>
            </form>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="mainDashboard" class="container hidden">
        <div class="nav-bar">
            <h2>üéØ Admin Dashboard</h2>
            <div class="nav-buttons">
                <a href="attendance.html" class="nav-button">üìã Mark Attendance</a>
                <button class="nav-button logout-button" onclick="logout()">Logout</button>
            </div>
        </div>
        <h1>üéØ Registration & QRMaze API Tester</h1>

        <div class="grid">
            <!-- Email Verification -->
            <div class="card">
                <h2><span class="badge post">POST</span>Verify Email</h2>
                <form id="verifyEmailForm">
                    <div class="form-group">
                        <label for="verifyEmail">Email Address</label>
                        <input type="email" id="verifyEmail" placeholder="user@example.com" required>
                    </div>
                    <button type="submit">Verify Email</button>
                </form>
                <div class="response" id="verifyEmailResponse"></div>
            </div>

            <!-- Get User's Team -->
            <div class="card">
                <h2><span class="badge get">GET</span>Get User's Team</h2>
                <form id="getUserTeamForm">
                    <div class="form-group">
                        <label for="userIdentifier">Email or User ID</label>
                        <input type="text" id="userIdentifier" placeholder="user@example.com" required>
                        <div class="small-text">Can be email or UUID</div>
                    </div>
                    <button type="submit">Get Team</button>
                </form>
                <div class="response" id="getUserTeamResponse"></div>
            </div>

            <!-- Submit QRMaze Score -->
            <div class="card">
                <h2><span class="badge post">POST</span>Submit QRMaze Score</h2>
                <form id="submitScoreForm">
                    <div class="form-group">
                        <label for="scoreEmail">Email</label>
                        <input type="email" id="scoreEmail" placeholder="user@example.com" required>
                    </div>
                    <div class="form-group">
                        <label for="setNumber">Set Number (1-5)</label>
                        <select id="setNumber" required>
                            <option value="1">Set 1 - Introduction to Programming</option>
                            <option value="2">Set 2 - Data Structures</option>
                            <option value="3">Set 3 - Web Development</option>
                            <option value="4">Set 4 - Database Systems</option>
                            <option value="5">Set 5 - Advanced Problem Solving</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="correctAnswers">Correct Answers</label>
                        <input type="number" id="correctAnswers" min="0" placeholder="5" required>
                    </div>
                    <div class="form-group">
                        <label for="timeTaken">Time Taken (seconds)</label>
                        <input type="number" id="timeTaken" min="0" placeholder="120" required>
                    </div>
                    <button type="submit">Submit Score</button>
                </form>
                <div class="response" id="submitScoreResponse"></div>
            </div>

            <!-- Get User Progress -->
            <div class="card">
                <h2><span class="badge get">GET</span>User QRMaze Progress</h2>
                <form id="userProgressForm">
                    <div class="form-group">
                        <label for="progressEmail">Email</label>
                        <input type="email" id="progressEmail" placeholder="user@example.com" required>
                    </div>
                    <button type="submit">Get Progress</button>
                </form>
                <div class="response" id="userProgressResponse"></div>
            </div>

            <!-- Create Random Teams -->
            <div class="card">
                <h2><span class="badge post">POST</span>Create Random Teams</h2>
                <form id="createTeamsForm">
                    <div class="form-group">
                        <label for="teamSize">Team Size</label>
                        <input type="number" id="teamSize" value="4" min="1" max="10" required>
                    </div>
                    <div class="form-group">
                        <label for="teamPrefix">Team Name Prefix</label>
                        <input type="text" id="teamPrefix" value="Team" required>
                    </div>
                    <button type="submit">Create Teams</button>
                </form>
                <div class="response" id="createTeamsResponse"></div>
            </div>

            <!-- Get All Teams -->
            <div class="card">
                <h2><span class="badge get">GET</span>All Teams</h2>
                <form id="getAllTeamsForm">
                    <button type="submit">Get All Teams</button>
                </form>
                <div class="response" id="getAllTeamsResponse"></div>
            </div>

            <!-- QRMaze Leaderboard -->
            <div class="card">
                <h2><span class="badge get">GET</span>QRMaze Leaderboard</h2>
                <form id="leaderboardForm">
                    <div class="form-group">
                        <label for="leaderboardSet">Set Number (or Overall)</label>
                        <select id="leaderboardSet" required>
                            <option value="overall">Overall (All Sets)</option>
                            <option value="1">Set 1</option>
                            <option value="2">Set 2</option>
                            <option value="3">Set 3</option>
                            <option value="4">Set 4</option>
                            <option value="5">Set 5</option>
                        </select>
                    </div>
                    <button type="submit">Get Leaderboard</button>
                </form>
                <div class="response" id="leaderboardResponse"></div>
            </div>

            <!-- Clear Teams -->
            <div class="card">
                <h2><span class="badge delete">DELETE</span>Clear All Teams</h2>
                <form id="clearTeamsForm">
                    <p style="color: #f93e3e; margin-bottom: 12px;">‚ö†Ô∏è This will delete all team assignments!</p>
                    <button type="submit" style="background: linear-gradient(135deg, #f93e3e 0%, #c42c2c 100%);">Clear
                        All Teams</button>
                </form>
                <div class="response" id="clearTeamsResponse"></div>
            </div>

            <!-- ================= -->
            <!-- GAME LEVEL (2D Maze) -->
            <!-- ================= -->

            <!-- Submit Game Level Score -->
            <div class="card">
                <h2><span class="badge post">POST</span>Submit Game Level Score</h2>
                <form id="submitGameLevelForm">
                    <div class="form-group">
                        <label for="gameEmail">Email</label>
                        <input type="email" id="gameEmail" placeholder="user@example.com" required>
                    </div>
                    <div class="form-group">
                        <label for="gameLastLevel">Last Completed Level</label>
                        <select id="gameLastLevel" required>
                            <option value="Level_I">Level I</option>
                            <option value="Level_II">Level II</option>
                            <option value="Level_III">Level III</option>
                            <option value="Level_IV">Level IV</option>
                            <option value="Level_V">Level V</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="gameLevelTime">Level Time (seconds)</label>
                        <input type="number" id="gameLevelTime" min="0" placeholder="73" required>
                    </div>
                    <div class="form-group">
                        <label for="gameTotalTime">Total Game Time (seconds)</label>
                        <input type="number" id="gameTotalTime" min="0" placeholder="100" required>
                    </div>
                    <button type="submit">Submit Level Score</button>
                </form>
                <div class="response" id="submitGameLevelResponse"></div>
            </div>

            <!-- Get Game Submissions (Admin) -->
            <div class="card">
                <h2><span class="badge get">GET</span>All Game Submissions (Admin)</h2>
                <form id="getGameSubmissionsForm">
                    <button type="submit">Get All Submissions</button>
                </form>
                <div class="response" id="getGameSubmissionsResponse"></div>
            </div>

            <!-- Get Game Leaderboard -->
            <div class="card">
                <h2><span class="badge get">GET</span>Game Leaderboard</h2>
                <form id="getGameLeaderboardForm">
                    <button type="submit">Get Leaderboard</button>
                </form>
                <div class="response" id="getGameLeaderboardResponse"></div>
            </div>

            <!-- Game User Results -->
            <div class="card">
                <h2><span class="badge get">GET</span>User Game Results</h2>
                <form id="getGameUserResultsForm">
                    <div class="form-group">
                        <label for="gameUserEmail">Email</label>
                        <input type="email" id="gameUserEmail" placeholder="user@example.com" required>
                    </div>
                    <button type="submit">Get User Results</button>
                </form>
                <div class="response" id="getGameUserResultsResponse"></div>
            </div>

            <!-- Delete Game Submission -->
            <div class="card">
                <h2><span class="badge delete">DELETE</span>Delete Game Submission</h2>
                <form id="deleteGameSubmissionForm">
                    <div class="form-group">
                        <label for="gameSubmissionId">Submission ID</label>
                        <input type="text" id="gameSubmissionId" placeholder="UUID" required>
                    </div>
                    <p style="color: #f93e3e; margin-bottom: 12px; font-size: 12px;">‚ö†Ô∏è Irreversible action</p>
                    <button type="submit" style="background: linear-gradient(135deg, #f93e3e 0%, #c42c2c 100%);">Delete
                        Submission</button>
                </form>
                <div class="response" id="deleteGameSubmissionResponse"></div>
            </div>

            <!-- Health Check -->
            <div class="card full-width">
                <h2><span class="badge get">GET</span>Server Health Check</h2>
                <button onclick="checkHealth()">Check Server Health</button>
                <div class="response" id="healthResponse"></div>
            </div>
        </div>
    </div>

    </div>

    <script>
        const API_BASE = 'http://localhost:3000';
        const ADMIN_CREDENTIALS = {
            username: 'admin',
            password: 'admin123'
        };

        // Check if already logged in
        window.addEventListener('load', () => {
            const isLoggedIn = sessionStorage.getItem('isLoggedIn');
            if (isLoggedIn === 'true') {
                showDashboard();
                checkHealth();
            }
        });

        // Login Handler
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (username === ADMIN_CREDENTIALS.username && password === ADMIN_CREDENTIALS.password) {
                sessionStorage.setItem('isLoggedIn', 'true');
                showDashboard();
                document.getElementById('loginResponse').className = 'response success';
                document.getElementById('loginResponse').textContent = 'Login successful!';
                setTimeout(() => {
                    document.getElementById('loginResponse').className = 'response';
                }, 2000);
            } else {
                showResponse('loginResponse', { error: 'Invalid username or password' }, true);
            }
        });

        function showDashboard() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('mainDashboard').classList.remove('hidden');
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                sessionStorage.removeItem('isLoggedIn');
                document.getElementById('loginScreen').classList.remove('hidden');
                document.getElementById('mainDashboard').classList.add('hidden');
                document.getElementById('loginForm').reset();
            }
        }

        const setTitles = {
            1: "Introduction to Programming (C & Python)",
            2: "Data Structures & Algorithms",
            3: "Web Development Fundamentals",
            4: "Database Systems",
            5: "Advanced Problem Solving"
        };

        function showResponse(elementId, data, isError = false) {
            const element = document.getElementById(elementId);
            element.className = `response ${isError ? 'error' : 'success'}`;
            element.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
        }

        function showLoading(button) {
            button.disabled = true;
            button.innerHTML += '<span class="loading"></span>';
        }

        function hideLoading(button, originalText) {
            button.disabled = false;
            button.innerHTML = originalText;
        }

        // Verify Email
        document.getElementById('verifyEmailForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const button = e.target.querySelector('button');
            const originalText = button.innerHTML;
            showLoading(button);

            try {
                const response = await fetch(`${API_BASE}/api/verify-email`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        email: document.getElementById('verifyEmail').value
                    })
                });
                const data = await response.json();
                showResponse('verifyEmailResponse', data, !response.ok);
            } catch (error) {
                showResponse('verifyEmailResponse', { error: error.message }, true);
            } finally {
                hideLoading(button, originalText);
            }
        });

        // Get User's Team
        document.getElementById('getUserTeamForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const button = e.target.querySelector('button');
            const originalText = button.innerHTML;
            showLoading(button);

            try {
                const identifier = document.getElementById('userIdentifier').value;
                const response = await fetch(`${API_BASE}/api/teams/user/${encodeURIComponent(identifier)}`);
                const data = await response.json();
                showResponse('getUserTeamResponse', data, !response.ok);
            } catch (error) {
                showResponse('getUserTeamResponse', { error: error.message }, true);
            } finally {
                hideLoading(button, originalText);
            }
        });

        // Submit QRMaze Score
        document.getElementById('submitScoreForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const button = e.target.querySelector('button');
            const originalText = button.innerHTML;
            showLoading(button);

            try {
                const setNum = document.getElementById('setNumber').value;
                const response = await fetch(`${API_BASE}/api/qrmaze/submit-score`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        email: document.getElementById('scoreEmail').value,
                        setNumber: parseInt(setNum),
                        correctAnswers: parseInt(document.getElementById('correctAnswers').value),
                        timeTaken: parseInt(document.getElementById('timeTaken').value),
                        title: setTitles[setNum]
                    })
                });
                const data = await response.json();
                showResponse('submitScoreResponse', data, !response.ok);
            } catch (error) {
                showResponse('submitScoreResponse', { error: error.message }, true);
            } finally {
                hideLoading(button, originalText);
            }
        });

        // Get User Progress
        document.getElementById('userProgressForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const button = e.target.querySelector('button');
            const originalText = button.innerHTML;
            showLoading(button);

            try {
                const email = document.getElementById('progressEmail').value;
                const response = await fetch(`${API_BASE}/api/qrmaze/user/${encodeURIComponent(email)}`);
                const data = await response.json();
                showResponse('userProgressResponse', data, !response.ok);
            } catch (error) {
                showResponse('userProgressResponse', { error: error.message }, true);
            } finally {
                hideLoading(button, originalText);
            }
        });

        // Create Random Teams
        document.getElementById('createTeamsForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const button = e.target.querySelector('button');
            const originalText = button.innerHTML;
            showLoading(button);

            try {
                const response = await fetch(`${API_BASE}/api/teams/create-random`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        team_size: parseInt(document.getElementById('teamSize').value),
                        team_name_prefix: document.getElementById('teamPrefix').value
                    })
                });
                const data = await response.json();
                showResponse('createTeamsResponse', data, !response.ok);
            } catch (error) {
                showResponse('createTeamsResponse', { error: error.message }, true);
            } finally {
                hideLoading(button, originalText);
            }
        });

        // Get All Teams
        document.getElementById('getAllTeamsForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const button = e.target.querySelector('button');
            const originalText = button.innerHTML;
            showLoading(button);

            try {
                const response = await fetch(`${API_BASE}/api/teams`);
                const data = await response.json();
                showResponse('getAllTeamsResponse', data, !response.ok);
            } catch (error) {
                showResponse('getAllTeamsResponse', { error: error.message }, true);
            } finally {
                hideLoading(button, originalText);
            }
        });

        // QRMaze Leaderboard
        document.getElementById('leaderboardForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const button = e.target.querySelector('button');
            const originalText = button.innerHTML;
            showLoading(button);

            try {
                const setNum = document.getElementById('leaderboardSet').value;
                const url = setNum === 'overall'
                    ? `${API_BASE}/api/qrmaze/leaderboard`
                    : `${API_BASE}/api/qrmaze/leaderboard/${setNum}`;
                const response = await fetch(url);
                const data = await response.json();
                showResponse('leaderboardResponse', data, !response.ok);
            } catch (error) {
                showResponse('leaderboardResponse', { error: error.message }, true);
            } finally {
                hideLoading(button, originalText);
            }
        });

        // Clear All Teams
        document.getElementById('clearTeamsForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            if (!confirm('Are you sure you want to delete all team assignments?')) return;

            const button = e.target.querySelector('button');
            const originalText = button.innerHTML;
            showLoading(button);

            try {
                const response = await fetch(`${API_BASE}/api/teams/clear`, {
                    method: 'DELETE'
                });
                const data = await response.json();
                showResponse('clearTeamsResponse', data, !response.ok);
            } catch (error) {
                showResponse('clearTeamsResponse', { error: error.message }, true);
            } finally {
                hideLoading(button, originalText);
            }
        });

        // ==========================
        // GAME LEVEL Handlers (2D Maze)
        // ==========================

        // Submit Game Level Score
        document.getElementById('submitGameLevelForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const button = e.target.querySelector('button');
            const originalText = button.innerHTML;
            showLoading(button);

            try {
                const response = await fetch(`${API_BASE}/api/game/submit-level`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        email: document.getElementById('gameEmail').value,
                        lastCompletedLevel: document.getElementById('gameLastLevel').value,
                        levelTime: parseInt(document.getElementById('gameLevelTime').value),
                        totalGameTime: parseInt(document.getElementById('gameTotalTime').value),
                        completedAt: new Date().toISOString()
                    })
                });
                const data = await response.json();
                showResponse('submitGameLevelResponse', data, !response.ok);
            } catch (error) {
                showResponse('submitGameLevelResponse', { error: error.message }, true);
            } finally {
                hideLoading(button, originalText);
            }
        });

        // Get All Game Submissions
        document.getElementById('getGameSubmissionsForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const button = e.target.querySelector('button');
            const originalText = button.innerHTML;
            showLoading(button);

            try {
                const response = await fetch(`${API_BASE}/api/game/submissions`);
                const data = await response.json();
                showResponse('getGameSubmissionsResponse', data, !response.ok);
            } catch (error) {
                showResponse('getGameSubmissionsResponse', { error: error.message }, true);
            } finally {
                hideLoading(button, originalText);
            }
        });

        // Get Game Leaderboard
        document.getElementById('getGameLeaderboardForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const button = e.target.querySelector('button');
            const originalText = button.innerHTML;
            showLoading(button);

            try {
                const response = await fetch(`${API_BASE}/api/game/leaderboard`);
                const data = await response.json();
                showResponse('getGameLeaderboardResponse', data, !response.ok);
            } catch (error) {
                showResponse('getGameLeaderboardResponse', { error: error.message }, true);
            } finally {
                hideLoading(button, originalText);
            }
        });

        // Get Game User Results
        document.getElementById('getGameUserResultsForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const button = e.target.querySelector('button');
            const originalText = button.innerHTML;
            showLoading(button);

            try {
                const email = document.getElementById('gameUserEmail').value;
                const response = await fetch(`${API_BASE}/api/game/results/${encodeURIComponent(email)}`);
                const data = await response.json();
                showResponse('getGameUserResultsResponse', data, !response.ok);
            } catch (error) {
                showResponse('getGameUserResultsResponse', { error: error.message }, true);
            } finally {
                hideLoading(button, originalText);
            }
        });

        // Delete Game Submission
        document.getElementById('deleteGameSubmissionForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            if (!confirm('Are you sure you want to delete this game submission?')) return;

            const button = e.target.querySelector('button');
            const originalText = button.innerHTML;
            showLoading(button);

            try {
                const id = document.getElementById('gameSubmissionId').value;
                const response = await fetch(`${API_BASE}/api/game/submission/${id}`, {
                    method: 'DELETE'
                });
                const data = await response.json();
                showResponse('deleteGameSubmissionResponse', data, !response.ok);
            } catch (error) {
                showResponse('deleteGameSubmissionResponse', { error: error.message }, true);
            } finally {
                hideLoading(button, originalText);
            }
        });

        // Health Check
        async function checkHealth() {
            try {
                const response = await fetch(`${API_BASE}/health`);
                const data = await response.json();
                showResponse('healthResponse', data, !response.ok);
            } catch (error) {
                showResponse('healthResponse', { error: error.message }, true);
            }
        }

    </script>
</body>

</html>